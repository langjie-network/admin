/*
 TeeChart(tm) for JavaScript(tm)
 @fileOverview TeeChart for JavaScript(tm)
 v1.0 BETA - February 2012
 Copyright(c) 2012 by Steema Software SL. All Rights Reserved.
 http://www.steema.com

 Licensed with commercial and non-commercial attributes,
 specifically: http://www.steema.com/licensing/html5

 JavaScript is a trademark of Oracle Corporation.
*/
var Tee=Tee||{};
(function(){function o(d,b){this.x=d;this.y=b}function n(d,b,a,c){this.set(d,b,a,c)}function A(){this.left=this.right=this.top=this.bottom=2;this.apply=function(d){var b=d.width,a=d.height;d.x+=0.01*b*this.left;d.width-=0.01*b*Math.min(100,this.left+this.right);d.y+=0.01*a*this.top;d.height-=0.01*a*Math.min(100,this.top+this.bottom)}}function D(d,b,a){function c(a){a||(a=(new Date).getTime());a=(a-g.init)/g.duration;1>a?g.format.shadow.color="rgba(0,255,0,"+a.toString()+")":g.autoHide&&g.restore();
g.format.chart.draw();1>a&&requestAnimFrame(c,g)}this.format=a;this.bounds=b;this.duration=d;var g=this,d=a.shadow;this.init=(new Date).getTime();this.old=new v;this.old.set(d);d.visible=!0;d.color="rgba(0,255,0,0.1)";d.blur=10;d.width=0;d.height=0;requestAnimFrame(c,this);this.restore=function(){this.format.shadow.set(this.old)}}function w(d){this.chart=d;this.visible=!1;this.colors=["white","silver"];this.direction="topbottom";this.stops=null;this.create=function(b,a){return this.rect(b.x,b.y,b.width,
b.height,a)};this.rect=function(b,a,c,g,f){var e;e=this.chart.ctx;var h=e.createLinearGradient;"topbottom"==this.direction?e=h.call(e,b,a,b,a+g):"bottomtop"==this.direction?e=h.call(e,b,a+g,b,a):"leftright"==this.direction?e=h.call(e,b,a,b+c,a):"rightleft"==this.direction?e=h.call(e,b+c,a,b,a):"radial"==this.direction?(b+=0.5*c,a+=0.5*g,c=Math.max(c,g),e=e.createRadialGradient(b,a,0,b,a,c)):e="diagonalup"==this.direction?h.call(e,b,a+g,b+c,a):h.call(e,b,a,b+c,a+g);f&&this.setEndColor(f);c=this.colors;
g=c.length;b=(a=this.stops)?a.length:0;if(1<g)for(f=0;f<g;f++)e.addColorStop(b<=f?f/(g-1):a[f],c[f]);else e.addColorStop(0,0<g?c[0]:"white");return e}}function v(d){this.chart=d;this.visible=!1;this.blur=4;this.color="rgba(80,80,80,0.75)";this.height=this.width=4;this.prepare=function(b){this.visible?(b.shadowBlur=this.blur,b.shadowColor=this.color,b.shadowOffsetX=this.width,b.shadowOffsetY=this.chart.isAndroid?-this.height:this.height):b.shadowColor="transparent"}}function E(d){this.url="";this.chart=
d;this.visible=!0;this.tryDraw=function(b,a,c,g){this.image||(this.image=new Image,this.image.onload=function(){d.draw()});""==this.image.src?(d=this.chart,this.image.src=this.url):d.ctx.drawImage(this.image,b,a,c,g)}}function x(d){this.chart=d;this.fill="black";this.size=1;this.join="round";this.cap="square";this._g=this.dash=null;Object.defineProperty(this,"gradient",{get:function(){this._g||(this._g=new w(this.chart));return this._g}});this.prepare=function(b){var a=this.chart.ctx,c=this._g;a.strokeStyle=
c&&c.visible?c.create(this.chart.bounds):b?b:this.fill;a.lineWidth=this.size;a.lineJoin=this.join;a.lineCap=this.cap;a.shadowColor="transparent";a.mozCurrentTransform?a.mozDash=this.dash:this.chart.isChrome&&(a.webkitLineDash=this.dash)};this.setChart=function(b){this.chart=b;this._g&&(this._g.chart=b)}}function F(d){this.chart=d;this.style="11px Tahoma";this._g=null;Object.defineProperty(this,"gradient",{get:function(){this._g||(this._g=new w(this.chart));return this._g}});this.fill="black";this._sh=
null;Object.defineProperty(this,"shadow",{get:function(){this._sh||(this._sh=new v(this.chart));return this._sh}});this._s=null;Object.defineProperty(this,"stroke",{get:function(){this._s||(this._s=new x(this.chart),this._s.fill="");return this._s}});this.textAlign="center";this.baseLine="alphabetic";this.getSize=function(){var b=this.style.split(" "),a,c;for(a=0;a<b.length;a++)if(c=parseFloat(b[a]))return c;return 20};this.setSize=function(b){var a="",c=this.style.split(" "),g;for(g=0;g<c.length;g++)parseFloat(c[g])?
a+=b.toString()+"px ":a+=c[g]+" ";this.style=a};this.prepare=function(){var b=this.chart.ctx;b.textAlign=this.textAlign;b.textBaseline=this.baseLine;this._sh&&this._sh.prepare(b);b.font!=this.style&&(b.font=this.style)};this.setChart=function(b){this.chart=b;this._g&&(this._g.chart=b);this._sh&&(this._sh.chart=b);this._s&&this._s.setChart(b)}}function G(d){this.chart=d;this.items=[];this.draw=function(){for(var b=0,a;a=this.items[b++];)a.active&&a.draw()};this.mousemove=function(b){for(var a=0,c;c=
this.items[a++];)c.active&&c.mousemove(b)};this.mousedown=function(b){for(var a=0,c,g=!1;c=this.items[a++];)c.active&&(g=c.mousedown(b));return g};this.clicked=function(b){for(var a=0,c,g=!1;c=this.items[a++];)c.active&&c.clicked(b)&&(g=!0,c.onclick&&(g=c.onclick(c,b.x,b.y)));return g};this.add=function(b){this.items.push(b);return b}}function H(d){function b(a){0>a.old.x?(c.x=a.chart.oldPos.x+a.old.x,c.width=-a.old.x):(c.x=a.chart.oldPos.x,c.width=a.old.x);0>a.old.y?(c.y=a.chart.oldPos.y+a.old.y,
c.height=-a.old.y):(c.y=a.chart.oldPos.y,c.height=a.old.y);return c}this.chart=d;this.active=!1;this.enabled=!0;this.done=!1;this.mouseButton=0;var a=this.format=new Tee.Format(d);a.fill="rgba(255,255,255,0.5)";a.stroke.fill="darkgray";a.stroke.size=2;var c=new n;this.draw=function(){a.rectangle(b(this))};this.apply=function(){if(0>this.old.x||0>this.old.y)this.reset();else{b(this);var a=this.chart.axes;a.left.calcMinMax(c.y+c.height,c.y);a.bottom.calcMinMax(c.x,c.x+c.width);a.right.calcMinMax(c.y+
c.height,c.y);a.top.calcMinMax(c.x,c.x+c.width)}};this.reset=function(){var a=this.chart.axes;a.left.automatic=!0;a.bottom.automatic=!0;a.right.automatic=!0;a.top.automatic=!0}}function I(d){this.chart=d;this.active=!1;this.enabled=!0;this.done=!1;this.mouseButton=2;this.direction="both";this.position=new o(0,0)}function z(d,b){Tee.Annotation.call(this,d);this.transparent=!0;var a=this.format.font;a.shadow.visible=!0;a.shadow.width=2;a.shadow.height=2;a.shadow.blur=8;a.style="18px Tahoma";a.fill=
b;this.padding=4;this.calcRect=function(a){this.resize();var b=this.bounds.height+this.padding,f=d.chartRect;a?(this.position.y=f.y,f.setTop(this.position.y+b)):(this.position.y=f.height,f.height-=b+this.padding);this.position.x=0.5*(d.canvas.width-this.bounds.width)};this.tryDraw=function(a){this.visible&&""!=this.text&&(this.calcRect(a),this.draw())}}function J(d){var b=this.format=new Tee.Format(d);b.round.x=12;b.round.y=12;b.stroke.size=3;b.gradient.visible=!0;b.gradient.direction="bottomtop";
b.shadow.visible=!0;b.stroke.fill="#606060";this.transparent=!1;this.margins=new A;this.clear=function(){var a=d.bounds;d.ctx.clearRect(a.x,a.y,a.width,a.height)};this.draw=function(){if(this.transparent)this.clear();else{var a=d.chartRect,c=b.shadow;c.visible&&(a.width-=0.5*Math.abs(c.width)+2,a.height-=0.5*Math.abs(c.height)+2,0>c.width&&(a.x-=c.width),0>c.height&&(a.y-=c.height));var g=0;""!=b.stroke.fill&&(g=b.stroke.size,1<g&&(g*=0.5,a.x+=g,a.y+=g,a.width-=2*g,a.height-=2*g));(c.visible||0<b.round.x||
0<b.round.y)&&this.clear();b.rectangle(a);0<g&&(a.x+=g,a.y+=g,a.width-=2*g,a.height-=2*g)}}}function y(d){this.format=new Tee.Format(d);this.format.fill="#E6E6E6";this.format.stroke.fill="black";this.visible=!0;this.bounds=new n;this.draw=function(){this.format.rectangle(this.bounds)}}function s(d,b,a){function c(a){this.chart=a;this.stroke=new x(a);this.stroke.cap="butt";this.visible=!0;this.length=4}function g(a){Tee.Annotation.call(this,a);this.padding=4;this.transparent=!0}function f(a){return isFinite(a)?
10<=a?10*f(0.1*a):1>a?0.1*f(10*a):2>a?2:5>a?5:10:1}this.chart=d;this.visible=!0;this.inverted=!1;this.horizontal=b;this.otherSide=a;this.bounds=new n;this.position=0;this.format=new Tee.Format(d);this.format.stroke.size=2;this.labels=new function(a,c){this.chart=a;this.format=new Tee.Format(a);this.decimals=2;this.padding=4;this.separation=10;this.visible=!0;this.rotation=0;this.alternate=!1;this.labelStyle="auto";this.dateFormat="shortDate";this.getLabel=function(a,e){if(c.dateTime)return(new Date(e)).format(this.dateFormat);
var h=e|0;return h==e?a&&a.data.labels[h]?a.data.labels[h]:e.toFixed(0):e.toFixed(this.decimals)};this.width=function(a){return this.format.textWidth(this.getLabel(null,a))}}(d,this);var e=this.labels.format.font;this.scroll=function(a){this.automatic=!1;this.inverted&&(a=-a);this.minimum+=a;this.maximum+=a};b?(e.textAlign="center",e.baseLine=a?"bottom":"top"):(e.textAlign=a?"left":"right",e.baseLine="middle");this.grid=new function(a){this.chart=a;a=this.format=new Tee.Format(a);a.stroke.fill="silver";
a.stroke.cap="butt";a.fill="";this.visible=!0;this.lineDash=!1}(d);this.ticks=new c(d);this.innerTicks=new c(d);this.innerTicks.visible=!1;e=this.minorTicks=new c(d);e.visible=!1;e.length=2;e.count=3;g.prototype=new Tee.Annotation;this.title=new g(d);this.title.format.font.textAlign="center";this.automatic=!0;this.increment=this.maximum=this.minimum=0;this.log=!1;this.maxlabelwidth=this.increm=this.scale=this.axisSize=this.endPos=this.startPos=0;this.minmaxLabelWidth=function(){var a=this.labels,
e=this.roundMin(),c=this.maximum,h=a.width(e),h=Math.max(h,a.width(0.5*(e+c)));return Math.max(h,a.width(c))};this.checkMinMax=function(){var a=this.chart.series;this.automatic&&(this.horizontal?(this.minimum=a.minXValue(),this.maximum=a.maxXValue()):(this.minimum=a.minYValue(),this.maximum=a.maxYValue()))};this.calcScale=function(){var a=this.labels,e;a.format.font.prepare();e=this.horizontal?this.minmaxLabelWidth():a.format.textHeight("Wj");a.alternate&&(e*=0.5);e+=0.02*e*a.separation;if(0==this.increment)if(this.maximum==
this.minimum)a=1;else{var a=this.axisSize/e,c,h=a,b=!1,g=this.chart.series.count(),d,p;for(d=0;d<g;d++)if(c=this.chart.series.items[d],p=c.yMandatory,c.visible&&(p&&this.horizontal||!p&&!this.horizontal)&&c.associatedToAxis(this))if(b=c.count()<=h)break;c=b;a=Math.abs(this.maximum-this.minimum)/(a+1);a=c?Math.max(1,a):f(a)}else a=this.increment;this.increm=a;0>=this.increm&&(this.increm=0.1);a=this.maximum-this.minimum;0==a?a=1:this.log&&(a=Math.log(a));this.scale=this.axisSize/a;this.calc(this.minimum+
this.increm)-this.startPos<e&&(this.increm*=2)};this.hasAnySeries=function(){var a=this.chart.series.items,e=a.length,c,h,b;for(c=0;c<e;c++)if(h=a[c],h.visible&&h.associatedToAxis(this))return this.horizontal&&(b=h.data.x?h.data.x:h.data.values),this.dateTime=b&&0<b.length&&b[0]instanceof Date,!0;return!1};this.drawAxis=function(){var a=this.chart.ctx;a.beginPath();b?(a.moveTo(this.startPos,this.axisPos),a.lineTo(this.endPos,this.axisPos)):(a.moveTo(this.axisPos,this.startPos),a.lineTo(this.axisPos,
this.endPos));this.format.stroke.prepare();a.stroke()};this.drawGrids=function(){var c=this.chart.ctx,e,h=this.chart.chartRect,f=this.grid.format,g,d,q,p;c.beginPath();b?(d=this.bounds.y,p=a?h.getBottom()-1:h.y+1):(g=this.bounds.x,q=a?h.x+1:h.getRight()-1);if(""!=f.fill){h=this.roundMin();this.grid.centered&&(h+=0.5*this.increm);var r=f.stroke.fill;f.stroke.fill="";for(var t,o=-1;h<=this.maximum;)e=this.calc(h),0==o%2&&(b?f.rectangle(t,p,e-t,d-p):f.rectangle(g,t,q-g,e-t)),t=e,h+=this.increm,o++;f.stroke.fill=
r;c.fillStyle=""}h=this.roundMin();for(this.grid.centered&&(h+=0.5*this.increm);h<=this.maximum;){b?g=q=this.calc(h):d=p=this.calc(h);if(f.stroke.dash&&!c.mozCurrentTransform){t=c;e=g;var n=d,s=q,o=p,r=void 0,r=[10,5];t.save();var s=s-e,u=o-n,o=Math.sqrt(s*s+u*u),s=Math.atan2(u,s);t.translate(e,n);t.moveTo(0,0);t.rotate(s);n=r.length;s=0;u=!0;for(e=0;o>e;)e+=r[s++%n],e>o&&(e=o),u?t.lineTo(e,0):t.moveTo(e,0),u=!u;t.restore()}else c.moveTo(g,d),c.lineTo(q,p);h+=this.increm}f.stroke.prepare();f.shadow.prepare(c);
c.stroke()};this.roundMin=function(){if(this.dateTime)return this.minimum;var a=this.minimum/this.increm|0;return this.increm*(0>=this.minimum?a:1+a)};this.drawTicks=function(e,c,h){var f=this.roundMin(),g=1+e.length,d=1;if(b&&a||!b&&!a)g=-g,d=-1;var g=g*c+this.axisPos,d=d*c+this.axisPos,q,p=1,r=0;0==h?q=this.increm:(p+=h,q=this.increm/p);var t=this.chart.ctx;for(t.beginPath();f<=this.maximum;){if(0==h||0!=r++%p)c=this.calc(f),b?(t.moveTo(c,d),t.lineTo(c,g)):(t.moveTo(d,c),t.lineTo(g,c));f+=q}e.stroke.prepare();
t.stroke()};this.drawTitle=function(){if(""!=this.title.text){var a,e;if(b)e=this.axisPos+this.title.padding,this.ticks.visible&&(e+=this.ticks.length),this.labels.visible&&(this.labels.format.font.prepare(),a=this.labels.format.textHeight("Wj"),this.labels.alternate&&(a*=2),e+=a),a=this.startPos+0.5*this.axisSize-0.5*this.title.bounds.width,this.title.position.x=a,this.title.position.y=e,this.title.forceDraw();else{a=this.axisPos-this.title.bounds.height-this.title.padding;this.ticks.visible&&(a-=
this.ticks.length);this.labels.visible&&(e=this.maxlabelwidth,this.labels.alternate&&(e*=2),a-=e);e=this.startPos+0.5*this.axisSize+this.title.bounds.height;var c=this.chart.ctx;c.save();c.translate(a,e);c.rotate(-Math.PI/2);c.textAlign="center";this.title.position.x=0;this.title.position.y=0;this.title.forceDraw();c.restore()}}};var h;this.drawLabel=function(a,e){var c,b=this.labels;c=h&&h.notmandatory==this?b.getLabel(h,a):b.getLabel(null,a);e.width=b.format.textWidth(c);e.width>this.maxlabelwidth&&
(this.maxlabelwidth=e.width);this.horizontal?e.x-=0.5*e.width:e.y+=0.5*e.height;if(0!=b.rotation){var f=this.chart.ctx;f.save();f.translate(e.x,e.y);f.rotate(-Math.PI*b.rotation/180);f.textAlign="right";e.x=-8;e.y=3}b.format.drawText(e,c);0!=b.rotation&&this.chart.ctx.restore()};this.drawLabels=function(){this.maxlabelwidth=0;this.labels.format.font.prepare();var a=this.roundMin(),e=new n,c=this.axisPos,b=this.ticks.visible?this.ticks.length:0,b=b+this.labels.padding;this.horizontal?this.otherSide?
c-=b:c+=b:this.otherSide?c+=b:c-=b;b=c;e.height=this.labels.format.textHeight("Wj");h=this.chart.series.firstVisible();for(var f=this.labels.alternate,g=this.minmaxLabelWidth(),d;a<=this.maximum;)d=this.calc(a),this.horizontal?(e.x=d,e.y=c,f&&(c=c==b?this.otherSide?b-e.height:b+e.height:b)):(e.x=c,e.y=d-0.5*e.height,f&&(c=c==b?this.otherSide?b+g:b-g:b)),this.drawLabel(a,e),a+=this.increm};this.calc=function(a){this.log?(a-=this.minimum,a=0>=a?0:Math.log(a)*this.scale):a=(a-this.minimum)*this.scale;
return this.horizontal?this.inverted?this.endPos-a:this.startPos+a:this.inverted?this.startPos+a:this.endPos-a};this.fromPos=function(a){var e=this.horizontal;this.inverted&&(e=!e);return this.minimum+(e?a-this.startPos:this.endPos-a)/this.scale};this.fromSize=function(a){return a/this.scale};this.calcSize=function(a){return Math.abs(this.calc(a)-this.calc(0))};this.calcMinMax=function(a,e){this.automatic=!1;var c=this.fromPos(a),h=this.fromPos(e),b;c>h&&(b=c,c=h,h=b);this.minimum=c;this.maximum=
h};this.setMinMax=function(a,e){this.automatic=!1;this.minimum=a;this.maximum=e}}function K(d){this.chart=d;this.transparent=!1;var b=this.format=new Tee.Format(d);b.fill="white";b.round.x=8;b.round.y=8;b.font.textAlign="right";b.font.baseLine="top";b.shadow.visible=!0;this.title=new Tee.Annotation(d);this.title.transparent=!0;this.bounds=new n;this.position="right";this.visible=!0;this.inverted=!1;this.padding=5;this.align=0;this.fontColor=!1;var a=this.dividing=new x(d);a.fill="";a.cap="butt";this.symbol=
new function(a){this.chart=a;var c=this.format=new Tee.Format(a);c.shadow.visible=!0;c.shadow.color="silver";this.padding=this.height=this.width=8;this.visible=!0;this.draw=function(b,f,g,d){var m=a.ctx;if(b.isColorEach&&-1!=f){b.format.stroke.prepare();var o=m.fillStyle;c.fill=b.getFill(f);c.rectangle(g,d-0.5*this.height,this.width,this.height);b.hover.enabled&&b.over==f&&b.hover.rectangle(g,d-0.5*this.height,this.width,this.height);m.fillStyle=o}else if(m.beginPath(),m.moveTo(g,d),m.lineTo(g+this.width,
d),c.stroke.prepare(b.format.fill),m.stroke(),b.hover.enabled&&((g=this.chart.legend.showValues())&&b.over==f||!g&&-1!=b.over))b.hover.stroke.prepare(),m.stroke()}}(d);this.itemHeight=10;this.innerOff=0;this.textStyle=this.legendStyle="auto";this.totalWidth=function(){var a=this.itemWidth+8,c=this.symbol;c.visible&&(a+=c.width+c.padding);return a};this.availRows=function(){var a=this.bounds.y;a||(a=0);return 1+((d.chartRect.height-a)/this.itemHeight|0)};this.itemsCount=function(){var a=d.series,c=
a.visibleCount(),b=d.chartRect;"values"==this.legendStyle&&0<c?c=a.firstVisible().count():"auto"==this.legendStyle&&1<c||"series"==this.legendStyle||1==c&&(c=a.firstVisible().count());if(this.isVertical())c*this.itemHeight>b.height&&(c=this.availRows());else{this.rows=1;var a=this.totalWidth(),f=this.calcPadding(b),f=b.width-2*f;c*a>f?(this.perRow=f/a|0,c>this.perRow&&(this.rows=1+(c/this.perRow|0),this.rows*this.itemHeight>b.height&&(this.rows=this.availRows(),c=this.rows*this.perRow))):this.perRow=
c}return c};this.showValues=function(){var a=this.legendStyle;return"values"==a||"auto"==a&&1==d.series.visibleCount()};this.itemText=function(a,c){var b=a.dataText(c,this.textStyle);return this.onGetText?this.onGetText(this,a,c,b):b};var c=0;this.calcItemPos=function(a,b){var f=this.itemHeight,g=this.bounds;b.x=g.x;b.y=g.y+this.innerOff;this.isVertical()?(b.x+=g.width-6-this.innerOff,b.y+=0.4*f+a*f+c):(b.x+=this.innerOff+(1+a%this.perRow)*this.totalWidth(),b.y+=f*((a/this.perRow|0)+0.25))};this.drawSymbol=
function(a,c,b){var f=this.symbol;f.draw(a,c,b.x-this.itemWidth-f.width-f.padding,b.y+0.4*this.itemHeight)};var g={x:0,y:0},f=new n;this.drawItem=function(a,c,l){this.calcItemPos(l,g);f.x=g.x;f.y=g.y;var i=b.font.fill;this.fontColor&&(b.font.fill=this.showValues()?c.getFill(l):c.format.fill);b.drawText(f,a);b.font.fill=i;this.symbol.visible&&this.drawSymbol(c,l,g);0<l&&""!=this.dividing.fill&&(a=d.ctx,c=this.bounds,a.beginPath(),this.isVertical()?(a.moveTo(c.x,f.y-2),a.lineTo(c.getRight(),f.y-2)):
(l=f.x-this.itemWidth-4,i=this.symbol,i.visible&&(l-=i.width+i.padding),a.moveTo(l,c.y),a.lineTo(l,c.getBottom())),this.dividing.prepare(),a.stroke())};this.drawSeries=function(a,c){var b=d.series.items[a];return b.visible?(this.drawItem(""==b.title?"Series "+a.toString():b.title,b,c),!0):!1};this.draw=function(){var a=this.itemsCount(),h,g;h=this.title;if(0<a)if(this.transparent||b.rectangle(this.bounds),0<c&&(h.bounds.x=this.bounds.x+4,h.bounds.y=this.bounds.y+2,h.doDraw()),b.font.prepare(),f.width=
this.itemWidth,f.height=this.itemHeight,this.showValues()){var i=d.series.firstVisible();g=0;h=a;if(this.inverted)for(;h--;)this.drawItem(this.itemText(i,h),i,g++);else for(g=0;g<h;g++)this.drawItem(this.itemText(i,g),i,g)}else if(h=d.series.count(),a=0,this.inverted)for(;h--;)this.drawSeries(h,a)&&a++;else for(g=0;g<h;g++)this.drawSeries(g,a)&&a++};this.largest=function(){var a=0,c,f,g,k,j=d.series;if(this.showValues()){c=j.firstVisible();k=this.itemsCount();for(f=0;f<k;f++)g=b.textWidth(this.itemText(c,
f)),g>a&&(a=g)}else{k=j.count();for(f=0;f<k;f++)c=j.items[f],c.visible&&(g=b.textWidth(c.title),g>a&&(a=g))}return a};this.calcPadding=function(a){return 0.01*this.padding*(this.isVertical()?a.width:a.height)};this.isVertical=function(){return"right"==this.position||"left"==this.position};this.calcrect=function(){var a=0,f=this.title,g=d.chartRect;b.font.prepare();this.itemHeight=b.textHeight("Wj");this.itemWidth=this.largest();f.visible&&""!=f.text?(f.resize(),c=f.bounds.height,a=f.bounds.width):
c=0;var f=this.calcPadding(g),i,k=this.bounds,j=this.align;this.isVertical()?(i=this.symbol.visible?this.symbol.width+this.symbol.padding:0,k.width=6+Math.max(a,6+this.itemWidth+i),0==j&&(j=20),k.y=0.01*d.bounds.height*j,k.height=(0.5+this.itemsCount())*this.itemHeight+c):(this.itemsCount(),k.width=f+this.perRow*this.totalWidth(),k.x=0.01*j*g.width+0.5*(g.width-k.width),k.height=this.itemHeight*(this.rows+0.25));""!=b.stroke.fill&&(i=b.stroke.size,1<i&&(k.width+=i,k.height+=i,this.innerOff=0.5*i));
"right"==this.position?(k.x=g.getRight()-k.width,g.setRight(Math.max(g.x,k.x-f))):"left"==this.position?(k.x=g.x,g.setLeft(k.x+k.width+f)):"top"==this.position?(k.y=g.y+f,g.setTop(k.getBottom()+f)):(k.y=g.getBottom()-k.height-f,g.setBottom(k.y-f))}}function B(d,b){Tee.Annotation.call(this,b);this.series=d;this.arrow=new Tee.Format(b);this.arrow.length=10;this.arrow.underline=!1;this.style="auto";this.drawEvery=1;this.visible=!1;this.setChart=function(a){this.chart=a;this.format.setChart(a);this.arrow.setChart(a)};
this.drawPolar=function(a,c,b,f){var e=this.series.markText(f),f=a.x+Math.cos(b)*c,h=a.y+Math.sin(b)*c,d=this.chart.ctx;this.text=e;this.resize();var e=this.bounds,i,k=this.position,c=c+this.arrow.length;i=a.x+Math.cos(b)*c;c=a.y+Math.sin(b)*c;k.x=Math.abs(i-a.x)<e.width?i-0.5*e.width:i<a.x?i-e.width:i;k.y=Math.abs(c-a.y)<e.height?c-0.5*e.height:c<a.y?c-e.height:c;d.beginPath();d.moveTo(f,h);d.lineTo(i,c);this.arrow.underline&&(d.moveTo(k.x,c),d.lineTo(k.x+e.width,c));this.arrow.stroke.prepare();
d.stroke();this.draw()};this.drawMark=function(a,c,b,f){var e=this.series.markText(b),b=this.arrow;if(e&&""!=e){this.text=e;this.resize();var h=f?-1:1,e=this.bounds,d=this.series.yMandatory;d?(e.x=a-0.5*e.width,e.y=c-h*(b.length+(f?0:e.height))):(e.x=a+h*b.length,f&&(e.x-=e.width),e.y=c-0.5*e.height);this.position.x=e.x;this.position.y=e.y;this.draw();var i=f?e.y:e.getBottom(),h=this.chart.ctx;h.beginPath();d?(h.moveTo(a,i),h.lineTo(a,c),b.underline&&(h.moveTo(e.x,i),h.lineTo(e.x+e.width,i))):(c=
e.y+0.5*e.height,h.moveTo(a,c),f&&(e.x+=e.width),h.lineTo(e.x,c),b.underline&&(h.moveTo(e.x,e.y+e.height),h.lineTo(e.x+(f?-e.width:e.width),e.y+e.height)));b.stroke.prepare();h.stroke()}}}function L(d){for(var b=0,a=d.length;a--;)b+=d[a];return b}function C(d){this.chart=d;this.items=[];this.count=function(){return this.items.length};this.clicked=function(b){var a=!1;this.each(function(c){if(c.visible&&c.onclick){var g=c.clicked(b);-1!=g&&(a=c.onclick(c,g,b.x,b.y))}});return a};this.mousemove=function(b){for(var a=
this.items.length,c;a--&&!(c=this.items[a],c.visible&&c.mousemove(b)););};this.visibleCount=function(b,a,c){for(var g=0,f=this.items.length,e;f--,e=this.items[f];)if(e.visible&&(!a||e instanceof a))c&&e==b&&(c.index=g),g++;c&&(c.total=g);return g};this.beforeDraw=function(){this.each(function(b){b.useAxes&&b.recalcAxes();b.calcColorEach()})};this.anyUsesAxes=function(){for(var b=this.items.length,a;b--;)if(a=this.items[b],a.visible&&a.useAxes)return!0;return!1};this.firstVisible=function(){for(var b=
0,a;a=this.items[b++];)if(a.visible)return a;return null};this.vertMargins=function(){var b,a=this.items,c=a.length,g,f;if(0<c){b={x:0,y:0};g={x:0,y:0};a[0].vertMargins(b);for(f=1;f<c;f++)g.x=g.y=0,a[f].vertMargins(g),g.x>b.x&&(b.x=g.x),g.y>b.y&&(b.y=g.y)}return b};this.horizMargins=function(){var b,a=this.items,c=a.length,g,f;if(0<c){b={x:0,y:0};g={x:0,y:0};a[0].horizMargins(b);for(f=1;f<c;f++)g.x=g.y=0,a[f].horizMargins(g),g.x>b.x&&(b.x=g.x),g.y>b.y&&(b.y=g.y)}return b};this.minXValue=function(){for(var b=
Infinity,a=this.items.length,c;a--;)c=this.items[a],c.visible&&(c=c.minXValue(),c<b&&(b=c));return b};this.minYValue=function(){for(var b=Infinity,a=this.items.length,c;a--;)c=this.items[a],c.visible&&(c=c.minYValue(),c<b&&(b=c));return b};this.maxXValue=function(){for(var b=-Infinity,a=this.items.length,c;a--;)c=this.items[a],c.visible&&(c=c.maxXValue(),c>b&&(b=c));return b};this.maxYValue=function(){for(var b=-Infinity,a=this.items.length,c;a--;)c=this.items[a],c.visible&&(c=c.maxYValue(),c>b&&
(b=c));return b};this.draw=function(){var b=this.items.length,a=this.chart.ctx,c=this.chart.aspect,g,f;if(0<b){var e=c.clip&&this.chart.series.anyUsesAxes();e&&c.clipRect(this.chart.chartRect);try{for(g=0;g<b;g++)if(f=this.items[g],f.visible){var h=a.globalAlpha;a.globalAlpha=1-f.format.transparency;f.transform&&(a.save(),f.transform());f.draw();f.transform&&a.restore();a.globalAlpha=h}}finally{e&&a.restore()}for(g=0;g<b;g++)f=this.items[g],f.visible&&f.marks.visible&&(f.transform&&(a.save(),f.transform()),
f.drawMarks(),f.transform&&a.restore())}}}function M(d){this.chart=d;this.visible=!0;this.left=new s(d,!1,!1);this.top=new s(d,!0,!0);this.right=new s(d,!1,!0);this.bottom=new s(d,!0,!1);this.items=[this.left,this.top,this.right,this.bottom];this.each=function(b){for(var a=0,c;c=this.items[a++];)b.call(c)}}n.prototype.set=function(d,b,a,c){this.x=d;this.y=b;this.width=a;this.height=c};n.prototype.setFrom=function(d){this.x=d.x;this.y=d.y;this.width=d.width;this.height=d.height};n.prototype.getRight=
function(){return this.x+this.width};n.prototype.getBottom=function(){return this.y+this.height};n.prototype.setTop=function(d){this.height-=d-this.y;this.y=d};n.prototype.setBottom=function(d){this.height=d-this.y};n.prototype.setLeft=function(d){this.width-=d-this.x;this.x=d};n.prototype.setRight=function(d){this.width=d-this.x};n.prototype.contains=function(d){return d.x>=this.x&&d.x<=this.x+this.width&&d.y>=this.y&&d.y<=this.y+this.height};Tee.Tool=function(d){this.chart=d;this.active=!0};Tee.Tool.prototype.mousedown=
function(){};Tee.Tool.prototype.mousemove=function(){};Tee.Tool.prototype.clicked=function(){return!1};Tee.Tool.prototype.draw=function(){};w.prototype.setEndColor=function(d){for(var b=1,a=this.colors.length;b<a;b++)this.colors[b]=d};v.prototype.set=function(d){this.visible=d.visible;this.color=d.color;this.blur=d.blur;this.width=d.width;this.height=d.height};Tee.Format=function(d){this.chart=d;this.gradient=new w(d);this.fill="rgb(200,200,200)";this.stroke=new x(d);this.round={x:0,y:0};this.transparency=
0;this.font=new F(d);this._img=null;Object.defineProperty(this,"image",{get:function(){this._img||(this._img=new E(this.chart));return this._img}});this.shadow=new v(d);this.roundRect=function(a,c,b,f,e){var h=c+f,d=b+e,i=this.round.x,k=this.round.y,j=this.round.corners;0>e&&(b=d,d=b-e);0>f&&(c=h,h=c-f);2*i>f&&(i=0.5*f);2*k>e&&(k=0.5*e);!j||j[0]?a.moveTo(c+i,b):a.moveTo(c,b);!j||j[1]?(a.lineTo(h-i,b),a.quadraticCurveTo(h,b,h,b+k)):a.lineTo(h,b);!j||j[2]?(a.lineTo(h,d-k),a.quadraticCurveTo(h,d,h-i,
d)):a.lineTo(h,d);!j||j[3]?(a.lineTo(c+i,d),a.quadraticCurveTo(c,d,c,d-k)):a.lineTo(c,d);!j||j[0]?(a.lineTo(c,b+k),a.quadraticCurveTo(c,b,c+i,b)):a.lineTo(c,b);a.closePath()};this.textHeight=function(){return 1.3*this.font.getSize()};this.textWidth=function(a){return this.chart.ctx.measureText(a).width};this.draw=function(a,c,b,f,e,h){var d=this._img;0<this.transparency&&(a.globalAlpha=1-this.transparency);this.shadow.prepare(a);d&&d.visible&&""!=d.url?(a.save(),a.clip(),c?(c=c(),d.tryDraw(c.x,c.y,
c.width,c.height)):d.tryDraw(b,f,e,h),a.restore()):(a.fillStyle=this.gradient.visible?c?this.gradient.create(c()):this.gradient.rect(b,f,e,h):this.fill,a.fill());""!=this.stroke.fill&&(this.stroke.prepare(),a.stroke());0<this.transparency&&(a.globalAlpha=1)};this.drawText=function(a,c){function b(a,c,f){e.fillText(f,a,c);d&&""!=d.fill&&(d.prepare(),e.strokeText(f,a,c))}var f=this.font._g,e=this.chart.ctx,d=this.font._s;e.fillStyle=f&&f.visible&&a?f.create(a):this.font.fill;"center"==this.font.textAlign?
a.x+=0.5*a.width:"end"==this.font.textAlign&&(a.x+=a.width);var f=c.split("\n"),l=f.length;if(1<l)for(var i=this.textHeight(f[0]),k=a.y,j=0;j<l;j++)b(a.x,k,f[j]),k+=i;else b(a.x,a.y,c)};this.rectPath=function(a,c,b,f){var e=this.chart.ctx;e.beginPath();0<this.round.x||0<this.round.y?this.roundRect(e,a,c,b,f):e.rect(a,c,b,f)};this.rectangle=function(a,c,b,f){1>this.transparency&&("object"===typeof a?this.rectangle(a.x,a.y,a.width,a.height):(this.rectPath(a,c,b,f),this.draw(this.chart.ctx,null,a,c,
b,f)))};var b=new n;this.polygon=function(a){var c=this.chart.ctx,d=a.length,f;c.beginPath();c.moveTo(a[0].x,a[0].y);for(f=1;f<d;f++)c.lineTo(a[f].x,a[f].y);c.closePath();this.draw(c,function(){var c=0,f=0,d=0,g=0,k=a.length,j,m;if(0<k){c=d=a[0].x;f=g=a[0].y;for(m=1;m<k;m++)j=a[m].x,j<c?c=j:j>d&&(d=j),j=a[m].y,j<f?f=j:j>g&&(g=j)}b.x=c;b.y=f;b.width=d-c;b.height=g-f;return b})};this.ellipsePath=function(a,c,b,f,e){var f=0.5*f,d=b-e,b=b+e;a.beginPath();a.moveTo(c,d);a.bezierCurveTo(c+f,d,c+f,b,c,b);
a.bezierCurveTo(c-f,b,c-f,d,c,d);a.closePath()};this.ellipse=function(a,c,b,f){var e=this.chart.ctx;this.ellipsePath(e,a,c,2+b,0.38*(2+f));this.draw(e,null,a-0.5*b,c-0.5*f,b,f)}};Tee.Format.prototype.setChart=function(d){this.chart=d;this.shadow.chart=d;this.gradient.chart=d;this.font.setChart(d);this._img&&(this._img.chart=d);this.stroke.setChart(d)};Tee.Annotation=function(d,b,a,c){Tee.Tool.call(this,d);this.position=new o(a||10,c||10);var g=this.margins=new A;this.items=[];var f=this.bounds=new n;
this.visible=!0;this.transparent=!1;this.text=b||"";var e=this.format=new Tee.Format(d);e.font.textAlign="center";e.font.baseLine="top";e.fill="beige";e.round.x=4;e.round.y=4;e.stroke.fill="silver";e.shadow.visible=!0;var h,l,i;this.moveTo=function(a,c){this.position.x=a;this.position.y=c;this.resize()};this.resize=function(){e.font.prepare();this.rows=this.text.split("\n");h=e.textHeight(this.text);var a=this.rows.length;l=h*a+g.top;var c,b=l+g.bottom;if(1<a)for(c=0;a--;)c=Math.max(c,e.textWidth(this.rows[a]+
"W"));else c=e.textWidth(this.text+"W");c+=g.left+g.right;var a=this.position,d=a.y+l,i,p;for(i=0;p=this.items[i++];){var r=p.bounds;p.resize();b+=r.height;c=Math.max(c,r.width);r.x=a.x;r.y=d;d+=r.height}for(i=0;p=this.items[i++];)p.bounds.width=c-g.right;f.set(a.x,a.y,c,b)};this.add=function(a){a=new Tee.Annotation(this.chart,a);this.items.push(a);a.transparent=!0;return a};this.doDraw=function(){if(""!=this.text){this.transparent||e.rectangle(f);e.font.prepare();f.y+=g.top+0.1*h;f.x+=g.left;var a=
f.width;f.width-=g.right;e.drawText(f,this.text);f.x=this.position.x;f.y=this.position.y;f.width=a}for(var a=0,c=this.items.length;a<c;a++)this.items[a].doDraw()};this.clicked=function(a){return f.contains(a)};this.mousemove=function(a){(this.mouseinside=this.cursor&&"default"!=this.cursor&&f.contains(a))?(this.chart.newCursor=this.cursor,this.wasinside||(i=new D(250,f,e),i.autoHide=!1)):this.wasinside&&(i.restore(),this.chart.draw());this.wasinside=this.mouseinside};this.forceDraw=function(){this.resize();
this.doDraw()};this.draw=function(){this.visible&&this.forceDraw()}};Tee.Annotation.prototype=new Tee.Tool;Tee.DragTool=function(d){Tee.Tool.call(this,d);this.target={series:null,index:-1};this.clicked=function(){this.target.series=null;this.target.index=-1};this.mousedown=function(b){this.target.series=null;this.target.index=-1;for(var a=this.chart.series.items,c=this.chart.calcMouse(b),d=a.length,b=0;b<d;b++)if(a[b].visible&&(this.target.index=a[b].clicked(c),-1!=this.target.index)){this.target.series=
a[b];break}return-1!=this.target.index};this.mousemove=function(b){if(-1!=this.target.index){var a=this.target.series,b=a.mandatoryAxis.fromPos(a.yMandatory?b.y:b.x);this.onchanging&&(b=this.onchanging(this,b));a.data.values[this.target.index]=b;if(this.onchanged)this.onchanged(this,b);this.chart.draw()}}};Tee.DragTool.prototype=new Tee.Tool;Tee.CursorTool=function(d){Tee.Tool.call(this,d);this.direction="both";this.size=new o(0,0);this.format=new Tee.Format(d);var b,a=d.axes.bottom,c=d.axes.left;
this.mousemove=function(d){b||(b=new o);if((b.x!=d.x||b.y!=d.y)&&d.x>a.startPos&&d.x<a.endPos&&d.y>c.startPos&&d.y<c.endPos)if(b.x=d.x,b.y=d.y,this.chart.draw(),this.onchange)this.onchange(d)};this.draw=function(){var d="both"==this.direction,f=this.chart.ctx,e;b||(b=new o(0.5*(a.startPos+a.endPos),0.5*(c.startPos+c.endPos)));f.beginPath();if(d||"vertical"==this.direction)e=0.5*this.size.y,f.moveTo(b.x,0==e?c.startPos:b.y-e),f.lineTo(b.x,0==e?c.endPos:b.y+e);if(d||"horizontal"==this.direction)e=0.5*
this.size.x,f.moveTo(0==e?a.startPos:b.x-e,b.y),f.lineTo(0==e?a.endPos:b.x+e,b.y);this.format.stroke.prepare();f.stroke()}};Tee.CursorTool.prototype=new Tee.Tool;"undefined"!==typeof window&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){window.setTimeout(d,1E3/60,(new Date).getTime())}}());Tee.ToolTip=function(d){function b(a){function f(a){c.moveTo(c.oldX+
a*c.deltaX,c.oldY+a*c.deltaY);c.chart.draw()}a||(a=(new Date).getTime());a=(a-c.init)/c.animated;1>a?(f(a),requestAnimFrame(b,c)):f(1)}Tee.Annotation.call(this,d);this.visible=!1;this.currentSeries=null;this.currentIndex=-1;this.autoHide=!1;this.delay=1E3;this.animated=100;this.hide=function(){if(this.onhide)this.onhide(this);this.visible=!1;this.chart.draw()};var a=function(a){a&&a[0].hide()};this.mousemove=function(c){for(var b=this.chart.series,e=b.count(),d=0;d<e;d++){var l=b.items[d];if(l.visible){var i=
l.clicked(c);if(i!=this.currentIndex){this.currentIndex=i;if(-1!=i){if(this.onshow)this.onshow(this,l,i);this.refresh(l,i);this.autoHide&&0<this.delay&&setTimeout(a,this.delay,[this])}else this.autoHide&&this.hide();break}}}};var c=null;this.refresh=function(a,f){this.visible=!0;this.text=a.markText(f);this.ongettext&&(this.text=this.ongettext(this,this.text,a,f));this.resize();var e=new o;a.calc(f,e);e.x-=0.5*this.bounds.width;e.y-=1.5*this.bounds.height;!this.autoHide&&0<this.animated&&!isNaN(this.position.x)&&
!isNaN(this.position.y)?(this.oldX=this.position.x,this.oldY=this.position.y,this.deltaX=e.x-this.oldX,this.deltaY=e.y-this.oldY,this.init=(new Date).getTime(),c=this,requestAnimFrame(b,this)):(this.moveTo(e.x,e.y),this.chart.draw())}};Tee.ToolTip.prototype=new Tee.Annotation;Tee.SeriesAnimation=function(d){function b(a,c,b){c.automatic=!1;var d=0.5*(a.oldmin+a.oldmax),a=0.5*(a.oldmax-a.oldmin);c.maximum=d+b*a;c.minimum=d-b*a}function a(f){f||(f=(new Date).getTime());var f=(f-g.init)/g.duration,e=
g.getAxis(),d=g.chart.series.items[0];e.automatic=!1;1>f?(g.setTransp(1-f),d instanceof Tee.Pie?(d.rotation=360*(1-f),c=f):b(g,e,1+10*(1-f)),g.chart.draw(),requestAnimFrame(a,g)):(g.setTransp(0),e.maximum=g.oldmax,e.minimum=g.oldmin,g.chart.draw(),d instanceof Tee.Pie&&(d.transform=null))}Tee.Tool.call(this,d);this.series=null;d instanceof Tee.Chart?this.chart=d:d instanceof Tee.Series&&(this.series=d,this.chart=d.chart);this.oldmax=this.oldmin=0;var c=1;this.duration=500;this.init=0;var g=null;this.setTransp=
function(a){this.series?this.series.format.transparency=a:this.chart.series.each(function(c){c.format.transparency=a})};this.getAxis=function(){var a=this.series||this.chart.series.firstVisible();return a?a.mandatoryAxis:null};this.animate=function(){var d=this.getAxis(),e=this.chart.series.items;0!=e.length&&(this.init=(new Date).getTime(),this.oldmin=d.minimum,this.oldmax=d.maximum,this.setTransp(100),e[0]instanceof Tee.Pie?e[0].transform=function(){this.chart.ctx.scale(c,c)}:b(this,d,10),this.chart.draw(),
g=this,requestAnimFrame(a,this))}};Tee.SeriesAnimation.prototype=new Tee.Tool;Tee.RainbowPalette=function(){return"#FF0000,#FF7F00,#FFFF00,#00FF00,#0000FF,#6600FF,#8B00FF".split(",")};Tee.Palette=function(d){this.colors=d;this.get=function(b){return this.colors[-1==b?0:b%this.colors.length]}};z.prototype=new Tee.Annotation;s.adjustRect=function(){if(this.visible&&this.hasAnySeries()){this.checkMinMax();var d=0,b=this.chart.chartRect,a=this.labels;a.visible&&(a.format.font.prepare(),d=this.horizontal?
a.format.textHeight("Wj"):this.minmaxLabelWidth(),a.alternate&&(d*=2),d+=a.padding);this.ticks.visible&&(d+=this.ticks.length);a=this.title;a.visible&&a.text&&""!=a.text&&(a.resize(),d+=a.bounds.height);this.horizontal?this.otherSide?b.setTop(b.y+d):b.height-=d:this.otherSide?b.width-=d:b.setLeft(b.x+d)}};s.calcRect=function(){if(this.hasAnySeries()){this.checkMinMax();var d=this.chart.chartRect,b=this.bounds;this.horizontal?(b.y=this.otherSide?d.y:d.y+d.height,b.width=d.width,this.startPos=d.x,this.endPos=
d.x+d.width,this.axisSize=d.width):(b.x=this.otherSide?d.x+d.width:d.x,b.height=d.height,this.startPos=d.y,this.endPos=d.y+d.height,this.axisSize=d.height);this.calcScale();this.automatic&&(b=this.chart.series,b=this.horizontal?b.horizMargins():b.vertMargins(),0<b.x&&(this.minimum-=this.fromSize(b.x)),0<b.y&&(this.maximum+=this.fromSize(b.y)));this.calcScale();b=this.horizontal?d.height:d.width;b*=0.01*this.position;this.axisPos=this.horizontal?this.otherSide?d.y+b:d.getBottom()-b:this.otherSide?
d.getRight()-b:d.x+b}};s.draw=function(){this.visible&&this.hasAnySeries()&&(this.drawAxis(),this.grid.visible&&this.drawGrids(),this.ticks.visible&&this.drawTicks(this.ticks,1,0),this.innerTicks.visible&&this.drawTicks(this.innerTicks,-1,0),this.minorTicks.visible&&this.drawTicks(this.minorTicks,1,Math.max(0,this.minorTicks.count)),this.labels.visible&&this.drawLabels(),this.title.visible&&this.title.text&&""!=this.title.text&&this.drawTitle())};B.prototype=new Tee.Annotation;Tee.Series=function(d,
b){this.chart=null;this.data={values:[],labels:[],source:null};this.yMandatory=!0;this.horizAxis="bottom";this.vertAxis="left";var a=this.format=new Tee.Format(this.chart),c=this.hover=new Tee.Format(this.chart),g=c.shadow;a.fill="";a.stroke.fill="";this.visible=!0;c.stroke.size=3;c.fill="";c.stroke.fill="red";g.visible=!0;g.color="red";g.blur=10;g.width=0;g.height=0;this.cursor="default";this.over=-1;this.marks=new B(this,this.chart);this.colorEach="auto";this.useAxes=!0;this.decimals=2;this.init=
function(a,c){"object"===typeof a&&a&&(a instanceof Array?(this.data.values=a,c instanceof Array&&(this.data.labels=c)):a instanceof Tee.Chart?(this.chart=a,c instanceof Array&&(this.data.values=c)):(this.data.source=a,this.refresh()))};this.init(d,b);this.getFill=function(a){return this.palette?this.palette.get(a):this.chart.palette.get(a)};this.getFillStyle=function(c,b){return a.gradient.visible?a.gradient.create(c,b):b};this.recalcAxes=function(){var a=this.chart.axes;this._horizAxis="top"==this.horizAxis?
a.top:a.bottom;this._vertAxis="right"==this.vertAxis?a.right:a.left;this.mandatoryAxis=this.yMandatory?this._vertAxis:this._horizAxis;this.notmandatory=this.yMandatory?this._horizAxis:this._vertAxis};this.title="";this.refresh=function(a){this.data.source?this.data.source instanceof HTMLTextAreaElement?(parseText(this.data,this.data.source.value),this.chart&&this.chart.draw()):this.data.source instanceof HTMLInputElement?doHttpRequest(this.data.source.value,function(a){parseText(this.data,a);this.chart.draw()},
function(c,b){a&&a(this,c,b)}):a&&a(this):this.data.xml?(parseXML(this,this.data.xml),this.chart.draw()):this.data.json&&(parseJSON(this,this.data.json),this.chart.draw())};this.valueOrLabel=function(a){var c=this.data.labels[a];if(!c||""==c)c=this.valueText(a);return c};this.toPercent=function(a){return(100*this.data.values[a]/L(this.data.values)).toFixed(this.decimals)+" %"};this.dataText=function(a,c){var b=this.data.labels[a];return"value"==c?this.valueText(a):"percent"==c?this.toPercent(a):"percentlabel"==
c?this.toPercent(a)+(b?" "+b:""):"valuelabel"==c||"auto"==c?this.valueText(a)+(b?" "+b:""):"label"==c?b||"":"index"==c?a.toFixed(0):"labelvalue"==c?(b?b+" ":"")+this.valueText(a):"labelpercent"==c?(b?b+" ":"")+this.toPercent(a):this.valueOrLabel(a)};this.markText=function(a){var c=this.marks,b=this.dataText(a,c.style);return c.onGetText?c.onGetText(this,a,b):b};this.valueText=function(a){return a=(a=this.data.values[a])?(a|0)==a?a.toFixed(0):a.toFixed(this.decimals):"0"};this.associatedToAxis=function(a){return a.horizontal?
"both"==this.horizAxis||this._horizAxis==a:"both"==this.vertAxis||this._vertAxis==a};this.bounds=function(a){var c=this._horizAxis,b=this._vertAxis;a.x=c.calc(this.minXValue());a.width=c.calc(this.maxXValue())-a.x;a.y=b.calc(this.maxYValue());a.height=b.calc(this.minYValue())-a.y};this.calcStack=function(a,c,b){var b=this.pointOrigin(a,!1)+b,d=this.mandatoryAxis;c.x=this.notmandatory.calc(this.data.x?this.data.x[a]:a);this.isStack100?(a=this.pointOrigin(a,!0),c.y=0==a?d.endPos:d.calc(100*b/a)):c.y=
d.calc(b);this.yMandatory||(a=c.x,c.x=c.y,c.y=a)};this.pointOrigin=function(a,c){var b=0,d,g,k=this.chart.series.items;for(d=0;d<k.length&&!(g=k[d],!c&&g==this);d++)g.visible&&g.constructor==this.constructor&&g.data.values.length>a&&(g=g.data.values[a],b+=c&&0>g?-g:g);return b}};Tee.Series.prototype.setChart=function(d,b){d.chart=b;d.recalcAxes();d.format.setChart(b);d.marks.setChart(b);d.hover.setChart(b)};Tee.Series.prototype.calc=function(d,b){b.x=this.notmandatory.calc(this.data.x?this.data.x[d]:
d);b.y=this.mandatoryAxis.calc(this.data.values[d]);if(!this.yMandatory){var a=b.x;b.x=b.y;b.y=a}};Tee.Series.prototype.clicked=function(){return-1};Tee.Series.prototype.mousemove=function(d){if(this.hover.enabled||"default"!=this.cursor){var d=this.clicked(d),b=this.chart;d!=this.over&&(this.over=d,this.hover.enabled&&requestAnimFrame(function(){b.draw()}));if("default"!=this.cursor&&-1!=d)return this.chart.newCursor=this.cursor,!0}return!1};Tee.Series.prototype.drawMarks=function(){var d=this.data.values.length,
b=new o,a;for(a=0;a<d;a+=this.marks.drawEvery)this.calc(a,b),this.marks.drawMark(b.x,b.y,a)};Tee.Series.prototype.horizMargins=function(){};Tee.Series.prototype.vertMargins=function(){};Tee.Series.prototype.minXValue=function(){return this.data.x&&0<this.data.x.length?Math.min.apply({},this.data.x):0};Tee.Series.prototype.minYValue=function(){return 0<this.data.values.length?Math.min.apply({},this.data.values):0};Tee.Series.prototype.maxXValue=function(){if(this.data.x)return 0<this.data.x.length?
Math.max.apply({},this.data.x):0;var d=this.data.values.length;return 0==d?0:d-1};Tee.Series.prototype.maxYValue=function(){return 0<this.data.values.length?Math.max.apply({},this.data.values):0};Tee.Series.prototype.calcColorEach=function(){this.isColorEach="yes"==this.colorEach};Tee.Series.prototype.stackMaxValue=function(){if("100"==this.stacked)return 100;var d=Tee.Series.prototype.maxYValue;if("no"==this.stacked)return d.call(this);for(var d=d.call(this),b=this.data.values.length;b--;)d=Math.max(d,
this.pointOrigin(b,!1)+this.data.values[b]);return d};Tee.Series.prototype.count=function(){return this.data.values.length};Tee.Series.prototype.addRandom=function(d,b,a){b||(b=1E3);var c=this.data;c.values.length=d;a&&(c.x=Array(d));if(0<d){c.values[0]=Math.random()*b;a&&(c.x[0]=Math.random()*b);for(var g=1;g<d;g++)c.values[g]=c.values[g-1]+Math.random()*b-0.5*b,a&&(c.x[g]=Math.random()*b)}return this};Tee.Series.prototype.doSort=function(d,b){if("none"==d)return null;for(var a=this.data.values,
c=a.length,g=Array(c),f=0;f<c;f++)g[f]=f;"labels"==d?(a=this.data.labels,g.sort(b?function(c,b){return a[c]<a[b]?1:a[c]==a[b]?0:-1}:function(c,b){return a[b]<a[c]?1:a[c]==a[b]?0:-1})):g.sort(b?function(c,b){return a[c]-a[b]}:function(c,b){return a[b]-a[c]});return g};C.prototype.each=function(d){for(var b=this.items.length,a=0;a<b;a++)d(this.items[a])};Tee.Chart=function(d,b,a){function c(c){f.chart.addSeries(new (a||Tee.Bar)(f.chart)).data.values=c}var g=navigator.userAgent.toLowerCase();this.isChrome=
-1<g.indexOf("chrome");this.isAndroid=-1<g.indexOf("android");d?this.canvas=d instanceof HTMLCanvasElement?d:"string"==typeof d?document.getElementById(d):d:(this.canvas=document.createElement("canvas"),this.canvas.width=600,this.canvas.height=400);var f=this.canvas;this.bounds=0==f.clientWidth?new n(0,0,f.width,f.height):new n(0,0,f.clientWidth,f.clientHeight);this.chartRect=new n;this.chartRect.setFrom(this.bounds);this.palette=new Tee.Palette("#4466a3,#f39c35,#f14c14,#4e97a8,#2b406b,#1d7b63,#b3080e,#f2c05d,#5db79e,#707070,#f3ea8d,#b4b4b4".split(","));
this.aspect={chart:this,view3d:!1,ortogonal:!0,rotation:0,elevation:315,perspective:50,clip:!0,clipRect:function(a){var c=this.chart.ctx;c.save();c.beginPath();c.rect(a.x,a.y,a.width,a.height);c.clip()}};this.panel=new J(this);this.walls={chart:this,visible:!0,left:new y(this),right:new y(this),bottom:new y(this),back:new y(this),draw:function(){this.back.visible&&this.back.draw();this.chart.aspect.view3d&&(this.left.visible&&this.left.draw(),this.bottom.visible&&this.bottom.draw(),this.right.visible&&
this.right.draw())}};d=this.walls.back.format;d.fill="rgb(240,240,240)";d.shadow.visible=!0;this.axes=new M(this);this.legend=new K(this);this.series=new C(this);this.title=new z(this,"blue");this.title.text="TeeChart";this.footer=new z(this,"red");this.zoom=new H(this);this.scroll=new I(this);this.tools=new G(this);this.oldPos=new o;this.calcMouse=function(a){var c=this.canvas,b=0,d=0;if(c.offsetParent){do b+=c.offsetLeft,d+=c.offsetTop;while(c=c.offsetParent)}if(null==a.pageX)var f=document.documentElement&&
null!=document.documentElement.scrollLeft?document.documentElement:document.body,c=a.clientX+f.scrollLeft,a=a.clientY+f.scrollTop;else c=a.pageX,a=a.pageY;return new o(c-b,a-d)};this.domousemove=function(a){a=a||window.event;a.touches&&(a=a.touches[a.touches.length-1]);var c=this.chart,a=c.calcMouse(a);if(c.scroll.active){var b=c.scroll.direction,d="both"==b,f;if(d||"horizontal"==b)f=c.axes.bottom.fromSize(c.oldPos.x-a.x),c.axes.top.scroll(f),c.axes.bottom.scroll(f);if(d||"vertical"==b)f=-c.axes.left.fromSize(c.oldPos.y-
a.y),c.axes.left.scroll(f),c.axes.right.scroll(f);c.oldPos.x=a.x;c.oldPos.y=a.y;c.scroll.done=!0;c.canvas.oncontextmenu=function(){return!1};if(c.onscroll)c.onscroll();requestAnimFrame(function(){c.draw()});return!1}if(c.zoom.active){if(a.x!=c.oldPos.x||a.y!=c.oldPos.y)c.zoom.old||(c.zoom.old=new o),c.zoom.old.x=a.x-c.oldPos.x,c.zoom.old.y=a.y-c.oldPos.y,requestAnimFrame(function(){c.draw()}),c.zoom.done=!0;return!1}c.newCursor=null;c.tools.mousemove(a);c.series.mousemove(a);a=this.chart.canvas.style;
c.newCursor?a.cursor!=c.newCursor&&(c.oldCursor=a.cursor,a.cursor=c.newCursor):void 0!=c.oldCursor&&a.cursor!=c.oldCursor&&(a.cursor=c.oldCursor);return!0};this.domousedown=function(a){var a=a||window.event,c=!1,b=this.chart,d=b.calcMouse(a.touches?a.touches[0]:a),f=b.series.anyUsesAxes()&&b.chartRect.contains(d);a.touches?1<a.touches.length?(b.zoom.active=b.zoom.enabled&&f,b.zoom.active&&(b.scroll.active=!1)):(b.scroll.active=b.scroll.enabled&&f,b.scroll.active&&(b.zoom.active=!1)):(b.zoom.active=
a.button==b.zoom.mouseButton&&b.zoom.enabled&&f,b.scroll.active=a.button==b.scroll.mouseButton&&b.scroll.enabled&&f);b.zoom.done=!1;b.scroll.done=!1;b.oldPos=d;a.button==b.zoom.mouseButton&&(c=b.tools.mousedown(a));c?b.zoom.active=b.scroll.active=!1:c=b.zoom.active||b.scroll.active;c&&a.preventDefault();return!c};this.domouseup=function(a){var a=a||window.event,c=this.chart,b;c.zoom.active=!1;c.scroll.active=!1;!c.zoom.done&&!c.scroll.done&&(c.canvas.oncontextmenu=null);if(c.zoom.done){c.zoom.apply();
if(c.onzoom)c.onzoom();c.draw();b=!0}else b=c.scroll.done,b||(b=c.series.clicked(c.oldPos))||(b=c.tools.clicked(c.oldPos));c.zoom.old=null;c.zoom.done=!1;c.scroll.done=!1;b&&a.preventDefault()};f.onmousedown=this.domousedown;f.ontouchstart=this.domousedown;f.onmouseup=this.domouseup;f.ontouchstop=this.domouseup;f.onmousemove=this.domousemove;f.ontouchmove=this.domousemove;this.addSeries=function(a){a.setChart(a,this);var c=this.series.items,b=c.indexOf(a);-1==b&&(b=c.push(a)-1);""==a.title&&(a.title=
"Series"+(1+b).toString());""==a.format.fill&&(a.format.fill=this.palette.get(b));return a};this.removeSeries=function(a){var c=this.series.items,a=c.indexOf(a);-1!=c&&c.splice(a,1)};f.chart=this;if(b&&0<b.length)if(b[0]instanceof Array)for(d=0;d<b.length;d++)c(b[d]);else c(b);this.getSeries=function(a){return this.series.items[a]};this.draw=function(){this.canvas.getContext&&(this.ctx=this.canvas.getContext("2d"));if(!this.ctx)throw"Canvas does not provide Context";this.chartRect.setFrom(this.bounds);
this.panel.draw();this.panel.margins.apply(this.chartRect);this.title.tryDraw(!0);this.footer.tryDraw(!1);this.series.beforeDraw();this.legend.visible?(this.legend.calcrect(),this.legend.draw()):this.chartRect.width-=30;this.axes.visible&&this.series.anyUsesAxes()&&(this.axes.each(s.adjustRect),this.axes.each(s.calcRect),this.walls.visible&&(this.walls.back.bounds.setFrom(this.chartRect),this.walls.draw()),this.axes.each(s.draw));this.series.draw();this.tools.draw();this.zoom.active&&this.zoom.draw();
if(this.onDraw)this.onDraw(this)};this.toImage=function(a,c,b){if(a=document.getElementById(a))a.src=""!=c?this.canvas.toDataURL(c,b):this.canvas.toDataURL()}};Tee.CustomBar=function(d,b){Tee.Series.call(this,d,b);this.sideMargins=100;this.useOrigin=!0;this.origin=0;this.marks.visible=!0;this.hover.enabled=!0;this.barSize=100;this.barStyle="bar";var a=this.format;a.fill="";a.stroke.fill="black";a.shadow.visible=!0;a.round.x=4;a.round.y=4;a.gradient.visible=!0;this.stacked="no";this.drawBar=function(c){"bar"==
this.barStyle?a.rectPath(c.x,c.y,c.width,c.height):a.ellipsePath(this.chart.ctx,c.x+0.5*c.width,c.y+0.5*c.height,2+c.width,0.38*(2+c.height))};this.countAll=function(a){var c=0,b=this.chart.series.items.length,d,f;for(d=0;d<b&&!(f=this.chart.series.items[d],f==this&&a);d++)f.visible&&f.constructor==this.constructor&&(c+=f.data.values.length);return c};var c=new o,g,f=new n,e={total:0,index:0};this.calcBarOffset=function(a){this.countall="sideAll"==this.stacked?this.countAll(!0):0;var b=2*("sideAll"==
this.stacked?this.countAll()-1:this.data.values.length-1),a=a/(b+0.01*this.sideMargins);"no"==this.stacked?(a/=e.total,c.x=a*(1==e.total?-0.5:0.5*e.total-e.index-1)):c.x=0.5*-a;c.y=0.01*a*this.barSize;c.x+=0.5*(a-c.y)};this.draw=function(){var b=this.data.values.length;if(0<b){this.initOffsets();var d=new o,e,k=this.chart.ctx;this.hover.enabled||(a.stroke.prepare(),a.shadow.prepare(k));for(var j=0;j<b;j++){if(this.isStacked){this.calcStack(j,d,this.data.values[j]);var m=this.pointOrigin(j,!1),n=this.mandatoryAxis;
this.isStack100?(e=this.pointOrigin(j,!0),g=0==e?n.endPos:n.calc(100*m/e)):g=n.calc(m)}else this.calc(j,d),"sideAll"==this.stacked&&(e=this.notmandatory.calc(this.countall+j),this.yMandatory?d.x=e:d.y=e);this.calcBarBounds(d,f,c,g);this.drawBar(f);e=this.hover.enabled&&this.over==j?this.hover:a;k.fillStyle=this.getFillStyle(f,this.isColorEach?this.getFill(j):e.fill);this.hover.enabled&&e.shadow.prepare(k);k.fill();""!=e.stroke.fill&&(this.hover.enabled&&e.stroke.prepare(),k.shadowColor="transparent",
k.stroke(),e.shadow.visible&&(k.shadowColor=e.shadow.color))}}};this.calcColorEach=function(){this.chart.series.visibleCount(this,Tee.CustomBar,e);this.isColorEach="yes"==this.colorEach||"auto"==this.colorEach&&1==e.total};this.initOffsets=function(){var a=this.notmandatory,c=this.mandatoryAxis,b=this.yMandatory?this.maxXValue()-this.minXValue():this.maxYValue()-this.minYValue();this.calcBarOffset(a.calcSize(b));g=this.useOrigin?c.calc(this.origin):c.inverted?c.startPos:c.endPos;this.isStacked="no"!=
this.stacked&&"sideAll"!=this.stacked;this.isStack100="100"==this.stacked};this.clicked=function(a){this.initOffsets();var b=new o,d=this.data.values.length,e;for(e=0;e<d;e++)if(this.calc(e,b),this.calcBarBounds(b,f,c,g),f.contains(a))return e;return-1};this.drawMarks=function(){var a=this.data.values,b=a.length,d=this.marks;if(0<b){var f=new o,e=this.mandatoryAxis,g,n;n=c.x+0.5*c.y;this.yMandatory?(g=n,n=0):g=0;for(var q=0;q<b;q+=d.drawEvery){this.calc(q,f);if("sideAll"==this.stacked){var p=this.notmandatory.calc(this.countall+
q);this.yMandatory?f.x=p:f.y=p}p=this.useOrigin&&a[q]<this.origin;e.inverted&&(p=!p);d.drawMark(f.x+g,f.y+n,q,p)}}}};Tee.CustomBar.prototype=new Tee.Series;Tee.CustomBar.prototype.parent=Tee.Series.prototype;Tee.CustomBar.constructor=Tee.CustomBar;Tee.Bar=function(d,b){Tee.CustomBar.call(this,d,b);this.calc=function(a,c){this.isStacked?this.calcStack(a,c,this.data.values[a]):this.parent.calc.call(this,a,c)};this.vertMargins=function(a){var c=this.marks;c.visible&&(a.y=c.arrow.length+c.format.textHeight("Wj"),
this.minYValue()<this.origin&&(a.x=a.y))};this.minXValue=function(){return this.parent.minXValue.call(this)-0.0050*this.sideMargins};this.maxXValue=function(){return("sideAll"==this.stacked?this.countAll()-1:this.parent.maxXValue.call(this))+0.0050*this.sideMargins};this.minYValue=function(){return Math.min(this.origin,this.parent.minYValue.call(this))};this.maxYValue=function(){return this.stackMaxValue()};this.calcBarBounds=function(a,c,b,d){c.x=a.x+b.x;c.width=b.y;this._vertAxis.inverted?(c.y=
d,c.height=a.y-c.y):(c.y=a.y,c.height=d-a.y);0>c.height&&(c.y+=c.height,c.height=-c.height)}};Tee.Bar.prototype=new Tee.CustomBar;Tee.Bar.prototype.parent=Tee.CustomBar.prototype;Tee.HorizBar=function(d,b){Tee.CustomBar.call(this,d,b);this.yMandatory=!1;this.format.gradient.direction="rightleft";this.maxMarkWidth=function(){var a=0,c,b,d;if(this.marks.visible){c=this.marks.format;c.font.prepare();for(b=this.count();b--;)d=c.textWidth(this.markText(b)),d>a&&(a=d)}return a};this.horizMargins=function(a){if(this.marks.visible){var c=
this.marks.arrow.length+this.maxMarkWidth();a.y=c;this.minXValue()<this.origin&&(a.x=c)}};this.minYValue=function(){return this.parent.minXValue.call(this)-0.0050*this.sideMargins};this.maxYValue=function(){return("sideAll"==this.stacked?this.countAll()-1:this.parent.maxXValue.call(this))+0.0050*this.sideMargins};this.minXValue=function(){return Math.min(this.origin,this.parent.minYValue.call(this))};this.maxXValue=function(){return this.stackMaxValue()};this.calcBarBounds=function(a,c,b,d){c.y=a.y+
b.x;c.height=b.y;this._horizAxis.inverted?(c.x=a.x,c.width=d-a.x):(c.x=d,c.width=a.x-c.x);0>c.width&&(c.x+=c.width,c.width=-c.width)}};Tee.HorizBar.prototype=new Tee.CustomBar;Tee.HorizBar.prototype.parent=Tee.CustomBar.prototype;Tee.CustomSeries=function(d,b){Tee.Series.call(this,d,b);this.stacked="no";this.stairs=!1;this.hover.enabled=!0;this.isStack100=this.isStacked=!1;this.smooth=0;this.pointer=new function(a){this.setChart=function(a){this.chart=a;this.format.setChart(a)};this.chart=a;a=this.format=
new Tee.Format(a);a.shadow.visible=!1;a.fill="";a.gradient.colors=["white","white","white"];a.shadow.visible=!0;this.colorEach=this.visible=!1;this.style="rectangle";this.height=this.width=12;this.draw=function(a,b,d,e){var h=this.chart.ctx;this.transform&&(h.save(),this.transform(a.x,a.y,b));var b=0.5*this.width,l=0.5*this.height;"rectangle"==this.style?d.rectangle(a.x-b,a.y-l,this.width,this.height):"ellipse"==this.style?d.ellipse(a.x,a.y,this.width,this.height):"triangle"==this.style?d.polygon([new o(a.x,
a.y-l),new o(a.x-b,a.y+l),new o(a.x+b,a.y+l)]):"downtriangle"==this.style?d.polygon([new o(a.x,a.y+l),new o(a.x-b,a.y-l),new o(a.x+b,a.y-l)]):"diamond"==this.style?d.polygon([new o(a.x,a.y-l),new o(a.x-b,a.y),new o(a.x,a.y+l),new o(a.x+b,a.y)]):(h.beginPath(),"cross"==this.style&&(h.moveTo(a.x-b,a.y),h.lineTo(a.x+b,a.y),h.moveTo(a.x,a.y-l),h.lineTo(a.x,a.y+l)),"x"==this.style&&(h.moveTo(a.x-b,a.y-l),h.lineTo(a.x+b,a.y+l),h.moveTo(a.x-b,a.y+l),h.lineTo(a.x+b,a.y-l)),d.stroke.prepare(e),h.stroke());
this.transform&&h.restore()}}(this.chart);this.maxYValue=function(){return this.stackMaxValue()};this.calc=function(a,c){this.isStacked?this.calcStack(a,c,this.data.values[a]):Tee.Series.prototype.calc.call(this,a,c)};this.calcColorEach=function(){this.isColorEach="yes"==this.colorEach||this.pointer.colorEach}};Tee.CustomSeries.prototype=new Tee.Series;Tee.CustomSeries.prototype.drawPointers=function(){var d=this.data.values.length,b,a=this.pointer.format,c="yes"==this.colorEach||this.pointer.colorEach;
c?b=a.fill:""==a.fill&&(a.fill=this.format.fill);var g=new o,f=a.gradient,e,h=a.fill;for(e=0;e<d;e++)this.calc(e,g),c&&(h=this.getFill(e),f.visible?f.setEndColor(h):a.fill=h),this.getSize(e),this.pointer.draw(g,e,a,h),this.hover.enabled&&this.over==e&&this.pointer.draw(g,e,this.hover,h);c&&(a.fill=b)};Tee.CustomSeries.prototype.setChart=function(d,b){var a=Tee.Series.prototype.setChart;a(d,b);d.pointer.setChart(b)};Tee.CustomSeries.prototype.clicked=function(d){if(this.pointer.visible){var b=this.data.values.length,
a=new n,c,g=this.pointer;for(c=0;c<b;c++)if(this.calc(c,a),this.getSize(c),a.x-=0.5*g.width,a.width=g.width,a.y-=0.5*g.height,a.height=g.height,a.contains(d))return c}return-1};Tee.CustomSeries.prototype.horizMargins=function(d){var b=this.pointer,a=b.format.stroke;b.visible&&(d.x=d.y=(""!=a.fill?a.size:0)+1+0.5*b.width)};Tee.CustomSeries.prototype.vertMargins=function(d){var b=this.pointer,a=b.format.stroke;b.visible&&(d.x=d.y=(""!=a.fill?a.size:0)+1+0.5*b.height)};Tee.CustomSeries.prototype.getSize=
function(){};Tee.Line=function(d,b){Tee.CustomSeries.call(this,d,b);this.drawLine=!0;this.hover.enabled=!1;var a=this.format;a.shadow.visible=!0;a.shadow.blur=10;a.lineCap="round";this.doDrawLine=function(c){this.isStacked="no"!=this.stacked;this.isStack100="100"==this.stacked;var b=new o,d,e=this.data.values.length,h,l=0,i=e;!this.smooth&&!this.data.x&&(l=Math.max(0,(this.notmandatory.minimum|0)-1),i=Math.min(e,(this.notmandatory.maximum|0)+2));c.beginPath();if(0<this.smooth){d=Array(2*e);for(h=
0;h<e;h++)this.calc(h,b),d[2*h]=b.x,d[2*h+1]=b.y;drawSpline(c,d,this.smooth,!0)}else for(h=l;h<i;h++)this.calc(h,b),h==l?c.moveTo(b.x,b.y):(this.stairs&&c.lineTo(d,b.y),c.lineTo(b.x,b.y)),d=b.x;e=a.stroke;this.chart.isChrome&&a.shadow.visible&&(e.size=Math.max(1.1,e.size));b=e.fill;e.prepare(""==b?a.fill:b);a.shadow.prepare(c);c.stroke()};this.draw=function(){0<this.data.values.length&&(this.drawLine&&this.doDrawLine(this.chart.ctx),this.pointer.visible&&this.drawPointers())}};Tee.Line.prototype=
new Tee.CustomSeries;Tee.PointXY=function(d,b){Tee.Line.call(this,d,b);this.hover.enabled=!0;this.pointer.visible=!0;this.drawLine=!1};Tee.PointXY.prototype=new Tee.Line;Tee.Pie=function(d,b){function a(a,c){c.x=i.x+Math.cos(a)*l;c.y=i.y+Math.sin(a)*l}Tee.Series.call(this,d,b);this.marks.style="percent";this.rotation=this.donut=0;this.colorEach="yes";this.useAxes=!1;var c=this.format;c.stroke.fill="black";c.shadow.visible=!0;c.gradient.visible=!0;c.gradient.direction="radial";c.gradient.colors=["white",
"white","white"];this.hover.enabled=!0;this.sort="values";this.orderAscending=!1;this.explode=null;this.marks.visible=!0;this.concentric=!1;this.getValue=function(a){return this.data.values[a]};this.calcCenter=function(a,c,b,d){if(this.explode&&(a=this.explode[a]))a=0.01*c*a,d.x+=a*Math.cos(b),d.y+=a*Math.sin(b)};this.clicked=function(a){var c=this.chart.ctx,b=this.data.values.length,d,f;m=j=Math.PI*this.rotation/180;for(d=0;d<b;d++)if(f=k?k[d]:d,this.slice(c,f),c.isPointInPath(a.x,a.y))return f;
return-1};var g,f,e,h,l,i={x:0,y:0},k,j,m,s;this.slice=function(c,b){var d=new o;m+=2*Math.PI*(this.data.values[b]/g);i.x=f;i.y=e;this.calcCenter(b,h,0.5*(j+m),i);0==this.donut?(d.x=i.x,d.y=i.y):a(j,d);c.beginPath();c.moveTo(d.x,d.y);c.arc(i.x,i.y,h,j,m,!1);0!=this.donut&&a(m,d);c.lineTo(d.x,d.y);0!=this.donut&&c.arc(i.x,i.y,l,m,j,!0);c.closePath();b==this.over&&(s=j);j=m};this.fill=function(a){return this.getFillStyle(this.chart.chartRect,this.getFill(a))};this.slices=function(a){var b=this.chart.ctx,
d=this.data.values.length,f,e;m=j=Math.PI*this.rotation/180;for(f=0;f<d;f++)e=k?k[f]:f,this.slice(b,e),a?c.shadow.prepare(b):b.fillStyle=this.fill(e),b.fill(),a||(e=c.stroke,""!=e.fill&&(e.prepare(),b.stroke()))};this.draw=function(){if(0<this.data.values.length){var a=0,b=this.marks;c.shadow.visible&&(a+=2*c.shadow.height);b.visible&&(b.format.font.prepare(),a+=b.format.textHeight("Wj")+0.5*b.arrow.length);var b=new n,d={total:0,index:-1};b.setFrom(this.chart.chartRect);this.chart.series.visibleCount(this,
Tee.Pie,d);if(!this.concentric&&1<d.total){var i=Math.round(Math.sqrt(d.total)),o=Math.round(d.total/i);b.width/=i;b.x+=d.index%i*b.width;b.height/=o;b.y+=(d.index/i|0)*b.height}f=b.x+0.5*b.width;e=b.y+0.5*b.height;h=0.5*b.width;a=0.5*(b.height-2*a);a<h&&(h=a);l=0.01*h*this.donut;a=this.data.values;d=0;for(i=a.length;i--;)d+=0<a[i]?a[i]:-a[i];g=d;k=this.doSort(this.sort,this.orderAscending);this.slices(!0);this.slices(!1);this.hover.enabled&&-1!=this.over&&(a=this.hover,""!=a.stroke.fill&&(m=j=s,
d=this.chart.ctx,this.slice(d,this.over),d.fillStyle=this.fill(this.over),a.draw(d,null,b.x,b.y,b.width,b.height)))}};this.drawMarks=function(){var a=j=Math.PI*this.rotation/180,c,b=this.data.values,d=b.length,l,m;for(m=0;m<d;m+=this.marks.drawEvery)l=k?k[m]:m,a+=2*Math.PI*(b[l]/g),c=0.5*(j+a),i.x=f,i.y=e,this.calcCenter(m,h,c,i),this.marks.drawPolar(i,h,c,l),j=a}};Tee.Pie.prototype=new Tee.Series;Tee.Area=function(d,b){Tee.CustomSeries.call(this,d,b);this.useOrigin=!1;this.origin=0;var a=this.format;
a.shadow.visible=!0;a.lineCap="round";a.stroke.fill="black";a.fill="";var c=new n;this.draw=function(){var b=this.data.values.length;if(0<b){var d=this.mandatoryAxis,e=this.notmandatory,h,l=this.yMandatory;h=this.useOrigin?d.calc(this.origin):l&&d.inverted||!l&&!d.inverted?d.startPos:d.endPos;this.isStacked="no"!=this.stacked;this.isStack100="100"==this.stacked;var i=new o,k,j,d=this.chart.ctx,m,n=this.isStacked,q=0,p=b;!this.smooth&&!this.data.x&&(q=Math.max(0,(e.minimum|0)-1),p=Math.min(b,(e.maximum|
0)+2));d.beginPath();if(0<this.smooth){m=Array(2*b);for(j=0;j<b;j++)this.calc(j,i),m[2*j]=i.x,m[2*j+1]=i.y;e=l?m[0]:m[1];drawSpline(d,m,this.smooth,!0);if(n){var r=0;for(j=b-1;0<=j;j--)this.calcStack(j,i,0),m[r++]=i.x,m[r++]=i.y;d.lineTo(m[0],m[1]);drawSpline(d,m,this.smooth,!1)}}else if(this.calc(q,i),d.moveTo(i.x,i.y),e=l?i.x:i.y,k=l?i.y:i.x,this.stairs)for(j=q+1;j<p;j++)this.calc(j,i),d.lineTo(i.x,k),d.lineTo(i.x,i.y),k=l?i.y:i.x;else for(j=q+1;j<p;j++)this.calc(j,i),d.lineTo(i.x,i.y);if(n){if(0==
this.smooth)for(j=p-1;j>=q;j--)this.calcStack(j,i,0),this.stairs?(d.lineTo(i.x,k),d.lineTo(i.x,i.y),k=l?i.y:i.x):d.lineTo(i.x,i.y)}else l?(d.lineTo(i.x,h),d.lineTo(e,h)):(d.lineTo(h,i.y),d.lineTo(h,e));d.closePath();b=a.gradient;b.visible&&(b.colors[b.colors.length-1]=a.fill);this.bounds(c);a.draw(d,null,c.x,c.y,c.width,c.height);this.pointer.visible&&this.drawPointers()}};this.minYValue=function(){var a=this.yMandatory?Tee.Series.prototype.minYValue.call(this):Tee.Series.prototype.minXValue.call(this);
return this.yMandatory?this.useOrigin?Math.min(a,this.origin):a:a};this.minXValue=function(){var a=this.yMandatory?Tee.Series.prototype.minXValue.call(this):Tee.Series.prototype.minYValue.call(this);return this.yMandatory?a:this.useOrigin?Math.min(a,this.origin):a};this.maxYValue=function(){return this.yMandatory?this.stackMaxValue():Tee.Series.prototype.maxXValue.call(this)};this.maxXValue=function(){return this.yMandatory?Tee.Series.prototype.maxXValue.call(this):this.stackMaxValue()}};Tee.Area.prototype=
new Tee.CustomSeries;Tee.HorizArea=function(d,b){Tee.Area.call(this,d,b);this.yMandatory=!1};Tee.HorizArea.prototype=new Tee.Area;Tee.Donut=function(d,b){Tee.Pie.call(this,d,b);this.donut=50};Tee.Donut.prototype=new Tee.Pie;Tee.Bubble=function(d,b){Tee.PointXY.call(this,d,b);var a=this.pointer;a.colorEach=!0;a.style="ellipse";a.format.gradient.visible=!0;a.format.gradient.direction="radial"};Tee.Bubble.prototype=new Tee.PointXY;Tee.Bubble.prototype.getSize=function(d){d=this.data.radius?this._vertAxis.calcSize(this.data.radius[d]):
0;this.pointer.width=d;this.pointer.height=d};Tee.Bubble.prototype.horizMargins=function(d){this.calcWidth=function(b){this.getSize(b);var b=1+0.5*this.pointer.width,a=this.pointer.format.stroke;""!=a.fill&&(b+=a.size);return b};this.pointer.visible&&(d.x=this.calcWidth(0),d.y=this.calcWidth(this.count()-1))};Tee.Bubble.prototype.vertMargins=function(d){this.calcHeight=function(b){this.getSize(b);var b=1+0.5*this.pointer.height,a=this.pointer.format.stroke;""!=a.fill&&(b+=a.size);return b};this.pointer.visible&&
(d.x=this.calcHeight(0),d.y=this.calcHeight(this.count()-1))};Tee.Candle=function(d,b){Tee.PointXY.call(this,d,b);this.pointer.width=7;this.pointer.format.stroke.visible=!1;this.higher=this.pointer.format;this.higher.fill="green";this.lower=new Tee.Format(this.chart);this.lower.fill="red";this.lower.stroke.visible=!1;this.style="candle";this.setChart=function(a,b){var d=Tee.PointXY.prototype.setChart;d(a,b);this.lower.setChart(b)};this.draw=function(){var a=this.data,b=a.values.length,d,f=new o,e=
this.pointer,h=0.5*e.width,l,i,k,j=this.mandatoryAxis,m,n,q=this.chart.ctx,p,r;for(d=0;d<b;d++)if(this.calc(d,f),r=f.x,l=j.calc(a.open[d]),i=j.calc(a.high[d]),k=j.calc(a.low[d]),f.y>l?(m=l,n=f.y-l,p=this.lower):(m=f.y,n=l-m,p=this.higher),"bar"==this.style?(q.beginPath(),q.moveTo(r,i),q.lineTo(r,k),q.moveTo(r-h,l),q.lineTo(r,l),q.moveTo(r,f.y),q.lineTo(r+h,f.y),p.stroke.prepare(p.fill),q.stroke()):this.hover.enabled&&this.over==d?this.hover.rectangle(r-h,m,e.width,n):p.rectangle(r-h,m,e.width,n),
"openclose"!=this.style&&(i<m||k>m+n))q.beginPath(),q.moveTo(r,m),q.lineTo(r,i),q.moveTo(r,m+n),q.lineTo(r,k),this.hover.enabled&&this.over==d?this.hover.stroke.prepare(p.fill):p.stroke.prepare(p.fill),q.stroke()};this.minYValue=function(){return 0<this.data.low.length?Math.min.apply({},this.data.low):0};this.maxYValue=function(){return 0<this.data.high.length?Math.max.apply({},this.data.high):0};this.addRandom=function(a){var b=this.data;b.values.length=a;b.close=b.values;b.open?b.open.length=a:
b.open=Array(a);b.high?b.high.length=a:b.high=Array(a);b.low?b.low.length=a:b.low=Array(a);if(0<a)for(var d=25+1E3*Math.random(),f,e=0;e<a;e++)f=b.open[e]=d,d=b.close[e]=d+50*Math.random()-25,b.high[e]=Math.max(f,d)+10*Math.random(),b.low[e]=Math.min(f,d)-10*Math.random()}};Tee.Candle.prototype=new Tee.PointXY;Tee.Candle.prototype.clicked=function(d){var b=this.pointer.width,a=this.mandatoryAxis,c=this.notmandatory,g=this.data,f=g.values.length,e=new n,h,l,i;e.width=b;for(h=0;h<f;h++)if(e.x=c.calc(h)-
0.5*b,l=a.calc(g.open[h]),i=a.calc(g.close[h]),e.y=l>i?i:l,e.height=Math.abs(l-i),e.contains(d))return h;return-1};Tee.Candle.prototype.vertMargins=function(){}})();
